(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4816:(e,t,r)=>{Promise.resolve().then(r.bind(r,9975))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},9975:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),a=r(1720),n=r(924),o=r(9208),i=r(8173),l=r.n(i),u=r(6046),d=r(2115),c=r(2110),h=r(3391);function m(){let[e,t]=(0,d.useState)(!1),[r,i]=(0,d.useState)(""),[m,g]=(0,d.useState)(""),[x,p]=(0,d.useState)(!1),[y]=(0,a.h8)(),w=(0,u.useRouter)(),v=(0,h.wA)(),f=(0,u.useSearchParams)().get("redirect")||"/",b=()=>t(e=>!e),j=async e=>{e.preventDefault(),p(!0);let t={request:{request_id:Date.now(),data:{identity:r,password:m}}};try{let e=await y(t).unwrap();o.A.set("access_token",e.data.access_token,{expires:1/24,secure:!0,sameSite:"Strict"}),localStorage.setItem("login_time",Date.now()),v((0,n.gV)(e.data)),console.log("Login successful:",e),w.push(f)}catch(e){var s;c.oR.error((null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Invalid email or password")}finally{p(!1)}};return(0,s.jsx)("div",{className:"font-[sans-serif]",children:(0,s.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center py-6 px-4",children:(0,s.jsx)("div",{className:"max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-8 rounded-2xl md:bg-white md:shadow",children:[(0,s.jsx)("h2",{className:"text-gray-800 text-center text-2xl font-bold",children:"Sign in"}),(0,s.jsxs)("form",{className:"mt-8 space-y-4",onSubmit:j,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-gray-800 text-sm mb-2 block",children:"Email"}),(0,s.jsx)("input",{name:"email",type:"email",value:r,onChange:e=>i(e.target.value),required:!0,className:"w-full text-gray-800 text-sm border border-gray-300 px-4 py-3 rounded-md outline-green-500",placeholder:"Enter Email"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-gray-800 text-sm mb-2 block",children:"Password"}),(0,s.jsxs)("div",{className:"relative flex items-center",children:[(0,s.jsx)("input",{name:"password",type:e?"text":"password",value:m,onChange:e=>g(e.target.value),required:!0,className:"w-full text-gray-800 text-sm border border-gray-300 px-4 py-3 rounded-md outline-green-500",placeholder:"Enter Password"}),e?(0,s.jsx)("svg",{onClick:b,className:"w-5 h-5 absolute right-4 text-gray-400 cursor-pointer","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3.933 13.909A4.357 4.357 0 0 1 3 12c0-1 4-6 9-6m7.6 3.8A5.068 5.068 0 0 1 21 12c0 1-3 6-9 6-.314 0-.62-.014-.918-.04M5 19 19 5m-4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}):(0,s.jsxs)("svg",{onClick:b,className:"w-5 h-5 absolute text-gray-400 right-4 cursor-pointer","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{stroke:"currentColor",strokeWidth:"2",d:"M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z"}),(0,s.jsx)("path",{stroke:"currentColor",strokeWidth:"2",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:(0,s.jsx)(l(),{href:"/forgot-password",className:"text-green-500 hover:underline font-semibold",children:"Forgot your password?"})}),(0,s.jsx)("div",{className:"!mt-8",children:(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full py-3 px-4 text-sm tracking-wide rounded-lg text-white bg-green-500 hover:bg-green-700 focus:outline-none disabled:opacity-50",children:x?"Signing in...":"Sign in"})}),(0,s.jsxs)("p",{className:"text-gray-800 text-sm !mt-8 text-center",children:["Don't have an account?"," ",(0,s.jsx)(l(),{href:"/register",className:"text-green-500 hover:underline ml-1 whitespace-nowrap font-semibold",children:"Register here"})]})]})]})})})})}},1720:(e,t,r)=>{"use strict";r.d(t,{Lv:()=>h,TP:()=>l,h8:()=>s,hr:()=>c,i0:()=>a});let{useLoginUserMutation:s,useCreateUserMutation:a,useGetAllUsersQuery:n,useGetUserByIdQuery:o,useGetUserQuery:i,useGetCurrentUserMutation:l,useUpdateUserByIdMutation:u,useDeleteUserByIdMutation:d,useForgetPasswordMutation:c,useResetPasswordMutation:h,useLogoutMutation:m}=r(3631).l.injectEndpoints({endpoints:e=>({createUser:e.mutation({query:e=>({url:"/auth/register",method:"POST",body:{...e}})}),loginUser:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:{...e}})}),getAllUsers:e.query({query:()=>"/users"}),getUserById:e.query({query:e=>"/users/".concat(e)}),getCurrentUser:e.mutation({query:e=>({url:"/users/get_user_by_token",method:"POST",body:{...e}})}),getUser:e.query({query:()=>"/currentuser"}),updateUserById:e.mutation({query:e=>{let{userData:t}=e;return{url:"/users/update_user_details",method:"PUT",body:{...t}}}}),deleteUserById:e.mutation({query:e=>({url:"/users/".concat(e),method:"DELETE"})}),forgetPassword:e.mutation({query:e=>({url:"/auth/forgot_password",method:"POST",body:{...e}})}),resetPassword:e.mutation({query:e=>({url:"/auth/reset_password",method:"POST",body:{...e}})}),logout:e.mutation({query:()=>({url:"/logout",method:"POST"})})})})},924:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,gV:()=>o,je:()=>l,mB:()=>d});var s=r(2212),a=r(9208);let n=(0,s.Z0)({name:"auth",initialState:{user:null,auth:null,notifications:null,isAuthenticated:!1,loading:!1},reducers:{setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0},setLoading:(e,t)=>{e.loading=t.payload},logOut:e=>{e.token=null,e.auth=null,e.user=null,e.notifications=null,e.isAuthenticated=!1,a.A.remove("access_token")}}}),{setUser:o,setLoading:i,logOut:l}=n.actions,u=n.reducer,d=e=>e.auth.user},3631:(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var s=r(565),a=r(9295),n=r(9208);let o=(0,s.cw)({baseUrl:"https://api.flairtips.com/api/v1/",prepareHeaders:(e,t)=>{let{getState:r}=t,s=n.A.get("access_token");return console.log("token: "+s),s&&e.set("authorization","Bearer ".concat(s)),e}}),i=async(e,t,r)=>{var s;let a=await o(e,t,r);return(null==a?void 0:null===(s=a.error)||void 0===s?void 0:s.originalStatus)===403&&(t.getState().auth.access_token?(t.dispatch(setCredentials({token:token})),a=await o(e,t,r)):t.dispatch(logOut())),a},l=(0,a.xP)({baseQuery:i,endpoints:e=>({})}),{}=l}},e=>{var t=t=>e(e.s=t);e.O(0,[470,110,173,441,517,358],()=>t(4816)),_N_E=e.O()}]);